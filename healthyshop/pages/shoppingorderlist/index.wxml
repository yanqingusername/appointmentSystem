<cu-custom isBack="{{true}}" bgColor="bg-white">
  <view slot="backText" bindtap="bindBack"></view>
  <view slot="content" class="title_name">订单列表</view>
</cu-custom>
<view class="search_border">
	<view class='search'>
		<view class="view_1">
      <view class="view_1_1" bind:tap="clickTab" data-typeid="0">
        <view class="view_1_1_1 {{typeid == 0 ? 'view_1_1_1_active':''}}">全部订单</view>
        <view class="view_1_1_2 {{typeid == 0 ? 'view_1_1_2_active':''}}"></view>
      </view>
      <view class="view_1_1" bind:tap="clickTab" data-typeid="1">
        <view class="view_1_1_1 {{typeid == 1 ? 'view_1_1_1_active':''}}">待收货</view>
        <view class="view_1_1_2 {{typeid == 1 ? 'view_1_1_2_active':''}}"></view>
      </view>
      <view class="view_1_1" bind:tap="clickTab" data-typeid="2">
        <view class="view_1_1_1 {{typeid == 2 ? 'view_1_1_1_active':''}}">已收货</view>
        <view class="view_1_1_2 {{typeid == 2 ? 'view_1_1_2_active':''}}"></view>
      </view>
    </view>
	</view>
</view>

<view class="page {{overflowFlag==true?'active':''}}" style="position:absolute;">
	<view class="P1" style="margin-top:100rpx">

  <view class="view10">
    <view class="view10_1">新冠肺炎核酸检测预约记录，<view class="view10_1_1" bind:tap="bindAppointment">点此查看 >></view></view>
  </view>

	<view class="view_3" wx:for="{{orderList}}" wx:key="index" bind:tap="bindShoppingorderdetail" data-ordernum="{{item.order_sn}}">
        <view class="view_5">
          <view class="view_3_1">订单号：{{item.order_sn}}</view>
          <view class="view_3_2_2" style="color: #999999;" wx:if="{{item.status == 4}}">已退款</view>
          <view class="view_3_2_2" wx:else>支付成功</view>
        </view>

        <view class="view_line"></view>

        <view class="view_3_2_3">{{item.payment_time}}</view>
        
        <!-- <view class="view_3_2" catchtap="handleRouter" data-id="{{item.product_code}}"> -->
        <view class="view_3_2">
          <view class="midouYizhanShop">
            <image class="midouYizhanShop-image" lazy-load src="{{item.img}}"></image>
          </view>

          <view class="midouFour">
            <view class="midouTitle">{{item.subtitle}}{{item.product_name}}</view>
            <view class="midouBuyView">
              <view class="midouNumber">X{{item.product_num}}</view>
              <view class="midouPrice"><text style="font-size: 22rpx;color: #999999;font-family: PingFangSC-Regular, PingFang SC;font-weight: 400;">实付： </text><text style="font-size: 24rpx;color: #FF0000;font-family: PingFangSC-Regular, PingFang SC;font-weight: 400;">￥</text>{{item.pay_amount}}</view>
            </view>
          </view>
        </view>

        <view class="view_7">
          <view class="view_7_1">
            <image class="view_7_1_1" wx:if="{{item.status == 2}}" lazy-load src="../../../images/icon_10_08_28.png"></image>
            <image class="view_7_1_1" wx:if="{{item.status == 3}}" lazy-load src="../../../images/icon_10_08_27.png"></image>
            <view class="view_7_1_2">{{item.status == 2 ? '已发货' : item.status == 3 ? '已收货' : item.status == 4 ? '已退款' : '待发货'}}</view>
          </view>
          <view class="view_7_2">{{item.receiver_name}} {{item.receiver_phone}}  {{item.receiver_province}}{{item.receiver_city}}{{item.receiver_region}}{{item.receiver_detail_address}}</view>
        </view>

        <view class="view_8">
          <view class="view_8_1"></view>
          <view class="view_8_2">
            <view class="view_8_2_2" catchtap="handleRouter" data-id="{{item.product_code}}">再次购买</view>
            <view class="view_8_2_1" wx:if="{{item.status == 2}}" catch:tap="clickSubmit" data-ordernum="{{item.order_sn}}">确认收货</view>
          </view>
        </view>
      </view>
		
    <view style="height:20rpx;"></view>
	</view>

  <view class="empty_view" wx:if="{{orderList.length == 0}}">
		<view class="empty_title" wx:if="{{typeid == 0}}">暂无订单，请在商场下单</view>
    <view class="empty_title" wx:if="{{typeid == 1}}">暂时还没有待收货的订单</view>
    <view class="empty_title" wx:if="{{typeid == 2}}">暂时还没有已收货的订单</view>
	</view>
</view>

<!-- 确认收货弹框 -->
<modalView show="{{showDialog}}"  datas="{{dialogData}}" bind:dialogCancel="dialogCancel" bind:dialogSure="dialogSure" types="1" />
 

